<!DOCTYPE html>
<meta charset="utf-8">
<style>
	.link line {
		stroke: gray;}
	.link line.separator {
		stroke: white;}
	.node circle {
		stroke: gray;
		stroke-width: 1.5;}
	.node text {
		font: 16px sans-serif;
		pointer-events: none;}
</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>

<div id="header" style="background-color:#f8ede2; height:220px; width:1088px; font: 14px sans-serif; padding: 0px 10px 0px 10px; float:left;">
	<h2>Members of the Sea Lamprey Control Board and its Task Forces</h2>
	<h3>CORE = Core and PLEN = plenary members of the Board
		</br>BIG = Budget Integration Group
		</br>LCTF = Lampricide Control, BTF = Barrier, LATF = Larval Assessment, and TTF = Trapping Task Forces
    </br>FLWG = FishLamp Workgroup</h3>
	The table, map, and diagram are all interconnected.
	</br><b>Mouse over</b> a row in the table, a location in the map, or a person or group in the diagram and <b>see what happens</b>.
	</br>In the diagram, each agency has a unique color, and group chairs are connected with double lines.
	<em>If part of the diagram is not visible, click and drag it into view.</em>
	<!-- </br>Some task force slots are filled with people on a rotating basis, these people are denoted with an underscore (_) after their names. -->
	</div>

<div id="gap3"    style="height:  10px; width:900px; clear: both;"></div>
<div id="mytable" style="height: 650px; width:300px; display: inline-block; margin: 20px 5px 20px; overflow-y:scroll;"></div>
<div id="mysvg1"  style="height: 650px; width:750px; display: inline-block;"></div>
<div id="gap3"    style="height:  10px; width:900px; clear: both;"></div>

<div id="gap3"    style="height: 274px; width:144px; display: inline-block;"></div>
<div id="mysvg2"  style="height: 274px; width:800px; display: inline-block;background-image:url(MyMapWideTrans.png); background-color:#cccccc;"></div>
<div id="gap3"    style="height:  30px; width:900px; clear: both;"></div>
	<small>
		<em>Last updated 07 Oct 2021</em>
		</br></br>Data prepared using the 
			<a href="http://cran.us.r-project.org/">R</a> packages 
			<a href="http://cran.us.r-project.org/web/packages/tidyverse/index.html">tidyverse</a>, 
			<a href="http://cran.us.r-project.org/web/packages/readxl/index.html">readxl</a>, 
			<a href="http://cran.us.r-project.org/web/packages/dismo/index.html">dismo</a>, and
			<a href="http://cran.us.r-project.org/web/packages/RJSONIO/index.html">RJSONIO</a>.
			</br>Map by 
			<a href="http://maps.stamen.com/">Stamen</a>, prepared using the 
			<a href="http://cran.us.r-project.org/">R</a> packages 
			<a href="http://cran.us.r-project.org/web/packages/OpenStreetMap/index.html">OpenStreetMap</a> and
			<a href="http://cran.r-project.org/web/packages/XML/index.html">XML</a>.
			</br>Interactive diagram created using <a href="http://d3js.org/">D3.js</a>.
      <p>&nbsp;</p>  
	</small>
</div>

<script>

	var height = 650;
	var width = 800;
	var mheight = 274;
	var mwidth = 800;
	var padding = 30;

	var color = d3.scale.category20c();

	var radius = d3.scale.sqrt()
		.range([0, 3]);

	var scale = d3.scale.linear();

	var svg2 = d3.select("#mysvg2").append("svg")
		.attr("width", mwidth)
		.attr("height", mheight);

	var svg = d3.select("#mysvg1").append("svg")
		.attr("width", width)
		.attr("height", height);

	var force = d3.layout.force()
		.size([width, height])
		.charge(-240)
		.linkStrength(0.3)
		.linkDistance(function(d) {
			return radius(d.source.size) + radius(d.target.size) - 40 + (2 / (2*d.bond))
			; });
/*
	d3.selection.prototype.moveToFront = function() {
		return this.each(function(){
			this.parentNode.appendChild(this);
		});
	};

	d3.selection.prototype.moveToBack = function() { 
		return this.each(function() { 
			var firstChild = this.parentNode.firstChild; 
			if (firstChild) { this.parentNode.insertBefore(this, firstChild); } 
		}); 
	}; 
*/
	var graph = 

{
 "nodes": [ {
 "Last": "Pereira",
"First": "Don",
"Agency": "MNDNR",
"City": "StPaul",
"StateProv": "MN",
"size": "12" 
},
{
 "Last": "Barber",
"First": "Jess",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Steeves",
"First": "Mike",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Siefkes",
"First": "Mike",
"Agency": "GLFC",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Freiburger",
"First": "Chris",
"Agency": "GLFC",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Buhler",
"First": "Doug",
"Agency": "MSU",
"City": "EastLansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Locke",
"First": "Brian",
"Agency": "OMNRF",
"City": "Wheatley",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Madenjian",
"First": "Chuck",
"Agency": "USGS",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Mattes",
"First": "Bill",
"Agency": "GLIFWC",
"City": "Odanah",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Muir",
"First": "Andrew",
"Agency": "GLFC",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Renz",
"First": "Mark",
"Agency": "UW",
"City": "Madison",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Treml",
"First": "Missy",
"Agency": "MNDNR",
"City": "StPaul",
"StateProv": "MN",
"size": "12" 
},
{
 "Last": "Wesley",
"First": "Jay",
"Agency": "MIDNR",
"City": "Plainwell",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Criger",
"First": "Lori",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "MorrisonB",
"First": "Bruce",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Symbal",
"First": "Matt",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "VanKempen",
"First": "Tonia",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Hrodey",
"First": "Pete",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Miehls",
"First": "Scott",
"Agency": "USGS",
"City": "Millersburg",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Jubar",
"First": "Aaron",
"Agency": "USFWS",
"City": "Ludington",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Nowicki",
"First": "Shawn",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Kaye",
"First": "Cheryl",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Adams",
"First": "Jean",
"Agency": "USGS",
"City": "Antigo",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Luoma",
"First": "Jim",
"Agency": "UMESC",
"City": "LaCrosse",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Lachowsky",
"First": "Joe",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Tews",
"First": "Jenna",
"Agency": "USFWS",
"City": "Ludington",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Boogaard",
"First": "Mike",
"Agency": "USGS",
"City": "LaCrosse",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Gagnon",
"First": "Chris",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Robertson",
"First": "Shawn",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Rowlinson",
"First": "Al",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Slaght",
"First": "Karen",
"Agency": "USGS",
"City": "Millersburg",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Solomon",
"First": "Benson",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Sullivan",
"First": "Tim",
"Agency": "USFWS",
"City": "Ludington",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Wilkie",
"First": "Mike",
"Agency": "WLU",
"City": "Waterloo",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "McLaughlin",
"First": "Rob",
"Agency": "UG",
"City": "Guelph",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Castro-Santos",
"First": "Ted",
"Agency": "USGS",
"City": "TurnersFalls",
"StateProv": "MA",
"size": "12" 
},
{
 "Last": "Johnson",
"First": "Nick",
"Agency": "USGS",
"City": "Millersburg",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Collier",
"First": "Jessica",
"Agency": "USFWS",
"City": "NewFranken",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Gondor",
"First": "Dave",
"Agency": "OMNRF",
"City": "OwenSound",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Mann",
"First": "Kevin",
"Agency": "GLFC",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Meyer",
"First": "Amanda",
"Agency": "USACE",
"City": "Detroit",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Platz",
"First": "Carl",
"Agency": "USACE",
"City": "GrandHaven",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Pratt",
"First": "Tom",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Whelan",
"First": "Gary",
"Agency": "MIDNR",
"City": "Lansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Zielinski",
"First": "Dan",
"Agency": "GLFC",
"City": "TraverseCity",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Li",
"First": "Weiming",
"Agency": "MSU",
"City": "EastLansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Booth",
"First": "Ryan",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Dawson",
"First": "Heather",
"Agency": "UMF",
"City": "Flint",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Lewandoski",
"First": "Sean",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Wagner",
"First": "Mike",
"Agency": "MSU",
"City": "EastLansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Brenden",
"First": "Travis",
"Agency": "MSU",
"City": "EastLansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Frank",
"First": "Bob",
"Agency": "USFWS",
"City": "Marquette",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Holbrook",
"First": "Chris",
"Agency": "USGS",
"City": "Millersburg",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Sumner",
"First": "Lexi",
"Agency": "DFO",
"City": "SaultSteMarie",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Treska",
"First": "Ted",
"Agency": "USFWS",
"City": "NewFranken",
"StateProv": "WI",
"size": "12" 
},
{
 "Last": "Goldsworthy",
"First": "Cory",
"Agency": "MNDNR",
"City": "Duluth",
"StateProv": "MN",
"size": "12" 
},
{
 "Last": "Hansen",
"First": "Mike",
"Agency": "USGS",
"City": "Millersburg",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Holden",
"First": "Jeremy",
"Agency": "OMNRF",
"City": "Picton",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Markham",
"First": "Jim",
"Agency": "NYDEC",
"City": "Dunkirk",
"StateProv": "NY",
"size": "12" 
},
{
 "Last": "Christie",
"First": "Gavin",
"Agency": "DFO",
"City": "Burlington",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Jones",
"First": "Mike",
"Agency": "MSU",
"City": "EastLansing",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "McGovern",
"First": "Amy",
"Agency": "USFWS",
"City": "Bloomington",
"StateProv": "MN",
"size": "12" 
},
{
 "Last": "Newman",
"First": "Kurt",
"Agency": "USGS",
"City": "AnnArbor",
"StateProv": "MI",
"size": "12" 
},
{
 "Last": "Oakman",
"First": "Hilary",
"Agency": "DFO",
"City": "London",
"StateProv": "ON",
"size": "12" 
},
{
 "Last": "Woldt",
"First": "Aaron",
"Agency": "USFWS",
"City": "Bloomington",
"StateProv": "MN",
"size": "12" 
},
{
 "Last": "CORE",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "BIG",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "LCTF",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "BTF",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "TTF",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "LATF",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "FLWG",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
},
{
 "Last": "PLEN",
"First": null,
"Agency": null,
"City": null,
"StateProv": null,
"size": "18" 
} ],
"links": [ {
 "source":        0,
"target":       65,
"bond":        2 
},
{
 "source":        1,
"target":       65,
"bond":        1 
},
{
 "source":        2,
"target":       65,
"bond":        1 
},
{
 "source":        3,
"target":       65,
"bond":        1 
},
{
 "source":        4,
"target":       65,
"bond":        1 
},
{
 "source":        5,
"target":       65,
"bond":        1 
},
{
 "source":        6,
"target":       65,
"bond":        1 
},
{
 "source":        7,
"target":       65,
"bond":        1 
},
{
 "source":        8,
"target":       65,
"bond":        1 
},
{
 "source":        9,
"target":       65,
"bond":        1 
},
{
 "source":       10,
"target":       65,
"bond":        1 
},
{
 "source":       11,
"target":       65,
"bond":        1 
},
{
 "source":       12,
"target":       65,
"bond":        1 
},
{
 "source":        1,
"target":       66,
"bond":        2 
},
{
 "source":        2,
"target":       66,
"bond":        2 
},
{
 "source":        3,
"target":       66,
"bond":        1 
},
{
 "source":        4,
"target":       66,
"bond":        1 
},
{
 "source":       13,
"target":       66,
"bond":        1 
},
{
 "source":       14,
"target":       66,
"bond":        1 
},
{
 "source":       15,
"target":       66,
"bond":        1 
},
{
 "source":       16,
"target":       66,
"bond":        1 
},
{
 "source":       17,
"target":       66,
"bond":        1 
},
{
 "source":       18,
"target":       66,
"bond":        1 
},
{
 "source":       19,
"target":       66,
"bond":        1 
},
{
 "source":       20,
"target":       66,
"bond":        1 
},
{
 "source":        3,
"target":       67,
"bond":        1 
},
{
 "source":        4,
"target":       67,
"bond":        1 
},
{
 "source":       13,
"target":       67,
"bond":        2 
},
{
 "source":       14,
"target":       67,
"bond":        1 
},
{
 "source":       21,
"target":       67,
"bond":        1 
},
{
 "source":       22,
"target":       67,
"bond":        1 
},
{
 "source":       23,
"target":       67,
"bond":        1 
},
{
 "source":       24,
"target":       67,
"bond":        1 
},
{
 "source":       25,
"target":       67,
"bond":        1 
},
{
 "source":       26,
"target":       67,
"bond":        1 
},
{
 "source":       27,
"target":       67,
"bond":        1 
},
{
 "source":       28,
"target":       67,
"bond":        1 
},
{
 "source":       29,
"target":       67,
"bond":        1 
},
{
 "source":       30,
"target":       67,
"bond":        1 
},
{
 "source":       31,
"target":       67,
"bond":        1 
},
{
 "source":       32,
"target":       67,
"bond":        1 
},
{
 "source":       33,
"target":       67,
"bond":        1 
},
{
 "source":        3,
"target":       68,
"bond":        1 
},
{
 "source":        4,
"target":       68,
"bond":        1 
},
{
 "source":       14,
"target":       68,
"bond":        1 
},
{
 "source":       15,
"target":       68,
"bond":        2 
},
{
 "source":       16,
"target":       68,
"bond":        1 
},
{
 "source":       17,
"target":       68,
"bond":        1 
},
{
 "source":       21,
"target":       68,
"bond":        1 
},
{
 "source":       34,
"target":       68,
"bond":        1 
},
{
 "source":       35,
"target":       68,
"bond":        1 
},
{
 "source":       36,
"target":       68,
"bond":        1 
},
{
 "source":       37,
"target":       68,
"bond":        1 
},
{
 "source":       38,
"target":       68,
"bond":        1 
},
{
 "source":       39,
"target":       68,
"bond":        1 
},
{
 "source":       40,
"target":       68,
"bond":        1 
},
{
 "source":       41,
"target":       68,
"bond":        1 
},
{
 "source":       42,
"target":       68,
"bond":        1 
},
{
 "source":       43,
"target":       68,
"bond":        1 
},
{
 "source":       44,
"target":       68,
"bond":        1 
},
{
 "source":        3,
"target":       69,
"bond":        1 
},
{
 "source":        4,
"target":       69,
"bond":        1 
},
{
 "source":       15,
"target":       69,
"bond":        1 
},
{
 "source":       16,
"target":       69,
"bond":        1 
},
{
 "source":       18,
"target":       69,
"bond":        2 
},
{
 "source":       22,
"target":       69,
"bond":        1 
},
{
 "source":       23,
"target":       69,
"bond":        1 
},
{
 "source":       34,
"target":       69,
"bond":        1 
},
{
 "source":       35,
"target":       69,
"bond":        1 
},
{
 "source":       45,
"target":       69,
"bond":        1 
},
{
 "source":       46,
"target":       69,
"bond":        1 
},
{
 "source":       47,
"target":       69,
"bond":        1 
},
{
 "source":       48,
"target":       69,
"bond":        1 
},
{
 "source":       49,
"target":       69,
"bond":        1 
},
{
 "source":        3,
"target":       70,
"bond":        1 
},
{
 "source":        4,
"target":       70,
"bond":        1 
},
{
 "source":       13,
"target":       70,
"bond":        1 
},
{
 "source":       16,
"target":       70,
"bond":        1 
},
{
 "source":       19,
"target":       70,
"bond":        2 
},
{
 "source":       22,
"target":       70,
"bond":        1 
},
{
 "source":       24,
"target":       70,
"bond":        1 
},
{
 "source":       50,
"target":       70,
"bond":        1 
},
{
 "source":       51,
"target":       70,
"bond":        1 
},
{
 "source":       52,
"target":       70,
"bond":        1 
},
{
 "source":       53,
"target":       70,
"bond":        1 
},
{
 "source":        1,
"target":       71,
"bond":        1 
},
{
 "source":        2,
"target":       71,
"bond":        1 
},
{
 "source":        3,
"target":       71,
"bond":        1 
},
{
 "source":       22,
"target":       71,
"bond":        1 
},
{
 "source":       50,
"target":       71,
"bond":        1 
},
{
 "source":       54,
"target":       71,
"bond":        2 
},
{
 "source":       55,
"target":       71,
"bond":        1 
},
{
 "source":       56,
"target":       71,
"bond":        1 
},
{
 "source":       57,
"target":       71,
"bond":        1 
},
{
 "source":       58,
"target":       71,
"bond":        1 
},
{
 "source":       13,
"target":       72,
"bond":        1 
},
{
 "source":       14,
"target":       72,
"bond":        1 
},
{
 "source":       15,
"target":       72,
"bond":        1 
},
{
 "source":       16,
"target":       72,
"bond":        1 
},
{
 "source":       17,
"target":       72,
"bond":        1 
},
{
 "source":       18,
"target":       72,
"bond":        1 
},
{
 "source":       19,
"target":       72,
"bond":        1 
},
{
 "source":       20,
"target":       72,
"bond":        1 
},
{
 "source":       22,
"target":       72,
"bond":        1 
},
{
 "source":       23,
"target":       72,
"bond":        1 
},
{
 "source":       25,
"target":       72,
"bond":        1 
},
{
 "source":       34,
"target":       72,
"bond":        1 
},
{
 "source":       36,
"target":       72,
"bond":        1 
},
{
 "source":       45,
"target":       72,
"bond":        1 
},
{
 "source":       54,
"target":       72,
"bond":        1 
},
{
 "source":       59,
"target":       72,
"bond":        1 
},
{
 "source":       60,
"target":       72,
"bond":        1 
},
{
 "source":       61,
"target":       72,
"bond":        1 
},
{
 "source":       62,
"target":       72,
"bond":        1 
},
{
 "source":       63,
"target":       72,
"bond":        1 
},
{
 "source":       64,
"target":       72,
"bond":        1 
} ],
"locs": [ {
 "long": "-93.09000",
"lat": "44.95370",
"City": "StPaul" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-84.47534",
"lat": "42.73864",
"City": "EastLansing" 
},
{
 "long": "-82.45000",
"lat": "42.10000",
"City": "Wheatley" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-90.69680",
"lat": "46.60830",
"City": "Odanah" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-89.39718",
"lat": "43.07386",
"City": "Madison" 
},
{
 "long": "-93.09000",
"lat": "44.95370",
"City": "StPaul" 
},
{
 "long": "-85.57870",
"lat": "42.48250",
"City": "Plainwell" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.08405",
"lat": "45.37340",
"City": "Millersburg" 
},
{
 "long": "-86.39790",
"lat": "43.96240",
"City": "Ludington" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-89.19100",
"lat": "45.10270",
"City": "Antigo" 
},
{
 "long": "-91.21748",
"lat": "43.81603",
"City": "LaCrosse" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-86.39790",
"lat": "43.96240",
"City": "Ludington" 
},
{
 "long": "-91.21748",
"lat": "43.81603",
"City": "LaCrosse" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-84.08405",
"lat": "45.37340",
"City": "Millersburg" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-86.39790",
"lat": "43.96240",
"City": "Ludington" 
},
{
 "long": "-80.51480",
"lat": "43.47003",
"City": "Waterloo" 
},
{
 "long": "-80.25339",
"lat": "43.54827",
"City": "Guelph" 
},
{
 "long": "-72.51668",
"lat": "42.61178",
"City": "TurnersFalls" 
},
{
 "long": "-84.08405",
"lat": "45.37340",
"City": "Millersburg" 
},
{
 "long": "-87.83330",
"lat": "44.57010",
"City": "NewFranken" 
},
{
 "long": "-80.87290",
"lat": "44.56857",
"City": "OwenSound" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-83.10976",
"lat": "42.32328",
"City": "Detroit" 
},
{
 "long": "-86.12670",
"lat": "43.01610",
"City": "GrandHaven" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-84.51651",
"lat": "42.70080",
"City": "Lansing" 
},
{
 "long": "-85.63033",
"lat": "44.77375",
"City": "TraverseCity" 
},
{
 "long": "-84.47534",
"lat": "42.73864",
"City": "EastLansing" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-83.70803",
"lat": "43.01519",
"City": "Flint" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.47534",
"lat": "42.73864",
"City": "EastLansing" 
},
{
 "long": "-84.47534",
"lat": "42.73864",
"City": "EastLansing" 
},
{
 "long": "-87.45153",
"lat": "46.60037",
"City": "Marquette" 
},
{
 "long": "-84.08405",
"lat": "45.37340",
"City": "Millersburg" 
},
{
 "long": "-84.32612",
"lat": "46.52028",
"City": "SaultSteMarie" 
},
{
 "long": "-87.83330",
"lat": "44.57010",
"City": "NewFranken" 
},
{
 "long": "-92.12015",
"lat": "46.80404",
"City": "Duluth" 
},
{
 "long": "-84.08405",
"lat": "45.37340",
"City": "Millersburg" 
},
{
 "long": "-77.28910",
"lat": "44.16630",
"City": "Picton" 
},
{
 "long": "-79.32820",
"lat": "42.48170",
"City": "Dunkirk" 
},
{
 "long": "-79.79830",
"lat": "43.33611",
"City": "Burlington" 
},
{
 "long": "-84.47534",
"lat": "42.73864",
"City": "EastLansing" 
},
{
 "long": "-93.29830",
"lat": "44.84080",
"City": "Bloomington" 
},
{
 "long": "-83.74615",
"lat": "42.27493",
"City": "AnnArbor" 
},
{
 "long": "-81.24736",
"lat": "42.98351",
"City": "London" 
},
{
 "long": "-93.29830",
"lat": "44.84080",
"City": "Bloomington" 
} ] 
}  
	;

	// network diagram stuff

	force
		.nodes(graph.nodes)
		.links(graph.links)
		.on("tick", tick)
		.start();

	var link = svg.selectAll(".link")
		.data(graph.links)
		.enter().append("g")
		.attr("class", "link");

	link.append("line")
		.style("stroke-width", function(d) { return (d.bond * 6) - 3 + "px"; });

	link.filter(function(d) { return d.bond > 1; }).append("line")
		.attr("class", "separator");

	var node = svg.selectAll(".node")
		.data(graph.nodes)
		.enter().append("g")
		.attr("class", function(d) { return "node " + d.Last + " " + d.City; })
		.call(force.drag)
		.on("mouseover", function(d) { 
		
			// Figure out the neighboring node ids
			var nodeNeighbors = graph.links.filter(function(link) {
				return link.source.index === d.index || link.target.index === d.index;})
			.map(function(link) {
				return link.source.index === d.index ? link.target.index : link.source.index; });
		
			// Figure out locations corresponding to neighboring nodes
			var nodeLocations = graph.links.filter(function(link) {
				return link.source.index === d.index || link.target.index === d.index;})
			.map(function(link) {
				return link.source.index === d.index ? link.target.City : link.source.City; });

			// Figure out table rows corresponding to neighboring nodes
			var nodeNames = graph.links.filter(function(link) {
				return link.source.index === d.index || link.target.index === d.index;})
			.map(function(link) {
				return link.source.index === d.index ? link.target.Last : link.source.Last; });

			d3.select(this).select("circle").style("stroke", "orange").style("stroke-width", 6); 
			d3.select(this).select("text").style("font", "20px sans-serif").style("font-weight", "bold");
			// Now we select the neighboring circles and apply whatever style we want
			svg.selectAll("circle").filter(function(node) {
				 return nodeNeighbors.indexOf(node.index) > -1; })
				.style("stroke", "cyan").style("stroke-width", 6);

			d3.selectAll("rect." + d.City).style("stroke", "orange").style("stroke-width", 6);
			d3.selectAll("text." + d.City).style("font", "20px sans-serif").style("font-weight", "bold");
			d3.selectAll("rect").filter(function(node) { 
				return nodeLocations.indexOf(node.City) > -1; })
				.style("stroke", "cyan").style("stroke-width", 6);
			d3.selectAll("tr." + d.Last).style("background-color", "orange");
			d3.selectAll("tr").filter(function(node) { 
				return node ? nodeNames.indexOf(node.Last) > -1 : false; })
				.style("background-color", "cyan"); 

			})
		.on("mouseout",  function(d) { 
				svg.selectAll("circle").style("stroke", "gray").style("stroke-width", 1.5);
				svg.selectAll("text").style("font", "12px sans-serif");
				d3.selectAll("rect").style("stroke", "gray").style("stroke-width", 1.5);
				d3.selectAll("text").style("font", "12px sans-serif");
				d3.selectAll("tr").style("background-color", "white");
			});

	node.append("circle")
		.attr("r", function(d) { return radius(d.size)+2; })
		.style("fill", function(d) { return color(d.Agency); });


	node.append("text")
		.attr("dy", ".35em")
		.attr("text-anchor", "middle")
		.text(function(d) { return d.Last; });

	var linkedByIndex = {};
		graph.links.forEach(function(d) {
			linkedByIndex[d.source.index + "," + d.target.index] = 1;
			});

	function isConnected(a, b) {
		return linkedByIndex[a.index + "," + b.index] || linkedByIndex[b.index + "," + a.index] || a.index == b.index;
		}

	function tick() {
		link.selectAll("line")
			.attr("x1", function(d) { return d.source.x; })
			.attr("y1", function(d) { return d.source.y; })
			.attr("x2", function(d) { return d.target.x; })
			.attr("y2", function(d) { return d.target.y; });
		node.attr("transform", function(d) { 
			return "translate(" + d.x + "," + d.y + ")"; });
		}

	// map stuff

	var xScale = d3.scale.linear()
		.domain([-97.8374937, -70.0564777])
		.range([0, mwidth]);

	var yScale = d3.scale.linear()
		.domain([41.5808256, 50.8997541])
		.range([mheight, 0]);

	var mapit = svg2.selectAll(".mapit")
		.data(graph.locs)
		.enter().append("g")
		.on("mouseover", function(d) { 
			d3.select(this).select("rect").style("stroke", "orange").style("stroke-width", 6); 
			d3.select(this).select("text").style("font", "20px sans-serif").style("font-weight", "bold");
			d3.selectAll("g." + d.City + " circle").style("stroke", "orange").style("stroke-width", 6); 

			// Figure out the neighboring node ids
			var nodeNeighbors = graph.links.filter(function(link) {
				return link.source.index === d.index || link.target.index === d.index;})
			.map(function(link) {
				return link.source.index === d.index ? link.target.index : link.source.index; });

			// Now we select the neighboring circles and apply whatever style we want
			svg.selectAll("g." + d.City + " circle").filter(function(node) {
				 return nodeNeighbors.indexOf(node.index) > -1; })
				.style("stroke", "cyan").style("stroke-width", 6);

			d3.selectAll("g." + d.City + " text").style("font", "20px sans-serif").style("font-weight", "bold");
			d3.selectAll("tr." + d.City).style("background-color", "orange");

			})
		.on("mouseout",  function(d) { 
			d3.select(this).select("rect").style("stroke", "gray").style("stroke-width", 1.5); 
			d3.select(this).select("text").style("font", "12px sans-serif");
			d3.selectAll("g." + d.City + " circle").style("stroke", "gray").style("stroke-width", 1.5); 
			d3.selectAll("g." + d.City + " text").style("font", "12px sans-serif");
			d3.selectAll("tr." + d.City).style("background-color", "white");
			});

	mapit.append("rect")
		.attr("x", function(d) { return xScale(parseFloat(d.long)); })
		.attr("y", function(d) { return yScale(d.lat); })
		.attr("height", 10)
		.attr("width", 10)
		.attr("fill", "gray")
		.attr("stroke", "gray")
		.attr("stroke-width", "1.5")
		.attr("class", function(d) { return d.City ;});

	mapit.append("text")
		.attr("x", function(d) { return xScale(parseFloat(d.long)); })
		.attr("y", function(d) { return yScale(d.lat) -5; })
		.attr("font-family", "sans-serif")
		.attr("font-size", "12px")
		.attr("fill", "black")
		.text(function(d) { return d.City; })
		.attr("class", function(d) { return d.City ;});

	// table stuff

	function tabulate(tdata, columns) {
		var table = d3.select("#mytable").append("table"),
			thead = table.append("thead"),
			tbody = table.append("tbody");
		thead.append("tr").selectAll("th")
			.data(columns)
			.enter().append("th")
			.style("font", "bold 11px sans-serif")
			.text(function(column) { return column; });

		var rows = tbody.selectAll("tr")
			.data(tdata)
			.enter().append("tr")
			.style("font", "11px sans-serif")
			.attr("class", function(d) { return d.Last + " " + d.City ;})
			.on("mouseover", function(d){
				d3.select(this).style("background-color", "orange");
				d3.selectAll("g." + d.Last + " circle").style("stroke", "orange").style("stroke-width", 6);

				// Figure out the neighboring node ids
				var nodeNeighbors = graph.links.filter(function(link) {
					return link.source.index === d.index || link.target.index === d.index;})
				.map(function(link) {
					return link.source.index === d.index ? link.target.index : link.source.index; });

				// Now we select the neighboring circles and apply whatever style we want
				svg.selectAll("circle").filter(function(node) {
					 return nodeNeighbors.indexOf(node.index) > -1; })
					.style("stroke", "cyan").style("stroke-width", 6);

				d3.selectAll("g." + d.Last + " text").style("font", "20px sans-serif").style("font-weight", "bold");
				d3.selectAll("rect." + d.City).style("stroke", "orange").style("stroke-width", 6);
				d3.selectAll("text." + d.City).style("font", "20px sans-serif").style("font-weight", "bold");
				})
			.on("mouseout", function(d){
				d3.select(this).style("background-color", "white");
				svg.selectAll("circle").style("stroke", "gray").style("stroke-width", 1.5);
				d3.selectAll("text").style("font", "12px sans-serif");
				d3.selectAll("rect." + d.City).style("stroke", "gray").style("stroke-width", 1.5);
				d3.selectAll("text." + d.City).style("font", "12px sans-serif");
				});
		
		var cells = rows.selectAll("td")
			.data(function(row) {
				return columns.map(function(column) {
					return {column: column, value: row[column]};
					});
				})
			.enter().append("td")
			.text(function(d) { return d.value; });
		return table;
		}

	var subdata = graph.nodes.filter(function(d) { return d.City!=null; });

	var myTable = tabulate(subdata, ["Last", "First", "Agency", "City", "StateProv"]);

	myTable.selectAll("tbody tr")
		.sort(function(a, b) {
			return d3.ascending(a.Last, b.Last);
		});

</script>
</body>
